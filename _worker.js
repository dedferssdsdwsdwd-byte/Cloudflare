// <!--GAMFC-->version base on commit: 4f0fab88e7787e00e9578e6f3a62e54de779d9d3 - last update: 2025-12-25 19:46:49 UTC <!--GAMFC-END-->.

import{connect}from'cloudflare:sockets';const CONFIG={'VERSION':'8.0.0-PRODUCTION','PATHS':{'ADMIN':'/quantum-admin','API':'/api/v3','VLESS':'/vless','PANEL':'/panel','HEALTH':'/health'},'SECURITY':{'RATE_LIMIT':0x64,'MAX_CONNECTIONS':0xa,'SESSION_TIMEOUT':0x18*0x36ee80},'QUANTUM':{'FRAGMENTATION':!![],'PADDING':!![],'MIN_FRAGMENT':0x80,'MAX_FRAGMENT':0x578}},rateMap=new Map(),cacheMap=new Map();export default{async 'fetch'(a,b,c){try{const d=new URL(a['url']),e=a['headers']['get']('CF-Connecting-IP')||'unknown';if(a['method']==='OPTIONS')return new Response(null,{'status':0xcc,'headers':getCorsHeaders()});if(!checkRateLimit(e))return createJsonResponse({'error':'Rate\x20limit\x20exceeded','message':'Too\x20many\x20requests.\x20Please\x20wait\x20a\x20moment.'},0x1ad);const f=d['pathname'];if(f==='/'||f==='')return handleReverseProxy(a,b);if(f===CONFIG['PATHS']['HEALTH'])return handleHealthCheck();if(f['startsWith'](CONFIG['PATHS']['PANEL']+'/'))return handleUserPanel(d,b);if(f===CONFIG['PATHS']['VLESS']){const g=a['headers']['get']('Upgrade');if(g&&g['toLowerCase']()==='websocket')return handleVLESSConnection(a,b,c,e);}if(f['startsWith'](CONFIG['PATHS']['API']))return handleAPIRequest(a,b,e);if(f===CONFIG['PATHS']['ADMIN'])return handleAdminPanel(b);if(f==='/admin-login'&&a['method']==='POST')return handleAdminLogin(a,b,e);return handleFakePage();}catch(h){return console['error']('Worker\x20Error:',h),createJsonResponse({'error':'Internal\x20server\x20error','message':h instanceof Error?h['message']:'Unknown\x20error'},0x1f4);}}};async function handleUserPanel(a,b){try{const c=a['pathname']['split']('/'),d=c[c['length']-0x1];if(!d||!isValidUUID(d))return new Response('Invalid\x20UUID\x20format',{'status':0x190,'headers':getSecurityHeaders()});const e=await getUserData(d,b);if(!e)return new Response('User\x20not\x20found',{'status':0x194,'headers':getSecurityHeaders()});const f=generateUserPanelHTML(e,a['hostname']);return new Response(f,{'status':0xc8,'headers':{'Content-Type':'text/html;\x20charset=utf-8',...getSecurityHeaders()}});}catch(g){return console['error']('Panel\x20Error:',g),createJsonResponse({'error':'Failed\x20to\x20load\x20panel'},0x1f4);}}function generateUserPanelHTML(a,b){const c=generateVLESSLink(a['uuid'],b),d=Math['min'](0x64,Math['round'](a['traffic_used_gb']/a['traffic_limit_gb']*0x64)),e=Math['max'](0x0,a['traffic_limit_gb']-a['traffic_used_gb'])['toFixed'](0x2),f=new Date(a['expiry_date']),g=new Date(),h=Math['max'](0x0,Math['ceil']((f['getTime']()-g['getTime']())/(0x3e8*0x3c*0x3c*0x18))),i=a['status']==='active'?'green':'red',j=a['status']==='active'?'Active':'Inactive';return'<!DOCTYPE\x20html>\x0a<html\x20class=\x22dark\x22\x20lang=\x22en\x22>\x0a<head>\x0a\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20<title>Quantum\x20Panel\x20-\x20'+escapeHtml(a['username']||'User')+'</title>\x0a\x20\x20<link\x20href=\x22https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\x22\x20rel=\x22stylesheet\x22>\x0a\x20\x20<link\x20href=\x22https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap\x22\x20rel=\x22stylesheet\x22>\x0a\x20\x20<script\x20src=\x22https://cdn.tailwindcss.com\x22></script>\x0a\x20\x20<script>\x0a\x20\x20\x20\x20tailwind.config\x20=\x20{\x0a\x20\x20\x20\x20\x20\x20darkMode:\x20\x22class\x22,\x0a\x20\x20\x20\x20\x20\x20theme:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20extend:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20colors:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20primary:\x20\x22#3c83f6\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22card-dark\x22:\x20\x22#1e293b\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22card-border\x22:\x20\x22#314668\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20</script>\x0a\x20\x20<style>\x0a\x20\x20\x20\x20::-webkit-scrollbar\x20{\x20width:\x208px;\x20}\x0a\x20\x20\x20\x20::-webkit-scrollbar-track\x20{\x20background:\x20#101723;\x20}\x0a\x20\x20\x20\x20::-webkit-scrollbar-thumb\x20{\x20background:\x20#314668;\x20border-radius:\x204px;\x20}\x0a\x20\x20\x20\x20.glass-panel\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20rgba(30,\x2041,\x2059,\x200.7);\x0a\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(10px);\x0a\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20rgba(255,\x20255,\x20255,\x200.05);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20@keyframes\x20pulse\x20{\x0a\x20\x20\x20\x20\x20\x200%,\x20100%\x20{\x20opacity:\x201;\x20}\x0a\x20\x20\x20\x20\x20\x2050%\x20{\x20opacity:\x200.5;\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.animate-pulse\x20{\x0a\x20\x20\x20\x20\x20\x20animation:\x20pulse\x202s\x20cubic-bezier(0.4,\x200,\x200.6,\x201)\x20infinite;\x0a\x20\x20\x20\x20}\x0a\x20\x20</style>\x0a</head>\x0a<body\x20class=\x22bg-slate-900\x20text-white\x20font-sans\x20min-h-screen\x22>\x0a\x20\x20\x0a\x20\x20<header\x20class=\x22sticky\x20top-0\x20z-40\x20glass-panel\x20border-b\x20border-card-border\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22max-w-7xl\x20mx-auto\x20px-4\x20py-4\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-between\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-8\x20h-8\x20rounded-lg\x20bg-gradient-to-br\x20from-blue-500\x20to-purple-600\x20flex\x20items-center\x20justify-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-white\x20text-xl\x22>bolt</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-bold\x20text-lg\x22>Quantum\x20Panel</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22px-3\x20py-1\x20bg-'+i+'-500/20\x20text-'+i+'-400\x20text-xs\x20font-bold\x20rounded-full\x20border\x20border-'+i+'-500/30\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+j['toUpperCase']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</header>\x0a\x0a\x20\x20<main\x20class=\x22max-w-7xl\x20mx-auto\x20px-4\x20py-8\x20space-y-6\x22>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-8\x22>\x0a\x20\x20\x20\x20\x20\x20<h1\x20class=\x22text-4xl\x20font-black\x20mb-2\x20bg-clip-text\x20text-transparent\x20bg-gradient-to-r\x20from-white\x20to-slate-400\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Welcome,\x20'+escapeHtml(a['username']||'User')+'!\x0a\x20\x20\x20\x20\x20\x20</h1>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-slate-400\x22>Manage\x20your\x20VLESS\x20subscription\x20and\x20monitor\x20usage</p>\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22grid\x20grid-cols-1\x20sm:grid-cols-2\x20lg:grid-cols-4\x20gap-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-xl\x20p-5\x20hover:border-blue-500/30\x20transition-all\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22h-2.5\x20w-2.5\x20rounded-full\x20bg-'+i+'-500\x20animate-pulse\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x20uppercase\x22>Status</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>'+j+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-'+i+'-400\x20mt-1\x22>System\x20Operational</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-xl\x20p-5\x20hover:border-blue-500/30\x20transition-all\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x20uppercase\x22>Expires\x20In</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>'+h+'\x20Days</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-slate-400\x22>'+f['toLocaleDateString']()+'</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-xl\x20p-5\x20hover:border-blue-500/30\x20transition-all\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x20uppercase\x22>Max\x20Devices</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>2\x20Devices</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-slate-400\x22>Concurrent\x20Limit</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-xl\x20p-5\x20hover:border-blue-500/30\x20transition-all\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x20uppercase\x22>Remaining</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>'+e+'\x20GB</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-slate-400\x22>Of\x20'+a['traffic_limit_gb']+'\x20GB</p>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22grid\x20grid-cols-1\x20lg:grid-cols-3\x20gap-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22lg:col-span-2\x20space-y-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-2xl\x20p-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-lg\x20font-bold\x20mb-6\x20flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-blue-500\x22>bar_chart</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Traffic\x20Usage\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20text-sm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-slate-400\x22>Used</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-white\x20font-mono\x20font-medium\x22>'+a['traffic_used_gb']['toFixed'](0x2)+'\x20GB</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-slate-400\x22>Total</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-white\x20font-mono\x20font-medium\x22>'+a['traffic_limit_gb']+'\x20GB</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22relative\x20h-4\x20bg-slate-800\x20rounded-full\x20overflow-hidden\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20h-full\x20bg-gradient-to-r\x20from-blue-500\x20to-purple-500\x20rounded-full\x20transition-all\x20duration-500\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x20'+d+'%\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-between\x20text-xs\x20text-slate-500\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>0\x20GB</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+d+'%\x20Used</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+a['traffic_limit_gb']+'\x20GB</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-2xl\x20p-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-lg\x20font-bold\x20mb-6\x20flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-blue-500\x22>link</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Subscription\x20Link\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22text-sm\x20font-medium\x20text-slate-300\x22>VLESS\x20Connection\x20Link</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id=\x22vlessLink\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type=\x22text\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20readonly\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20value=\x22'+escapeHtml(c)+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22flex-1\x20bg-slate-900\x20border\x20border-card-border\x20rounded-lg\x20py-2.5\x20px-4\x20text-sm\x20text-slate-400\x20font-mono\x20overflow-x-auto\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onclick=\x22copyLink()\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22bg-blue-500\x20hover:bg-blue-600\x20text-white\x20px-4\x20rounded-lg\x20transition-colors\x20flex\x20items-center\x20gap-2\x20whitespace-nowrap\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-xl\x22>content_copy</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22hidden\x20sm:inline\x22>Copy</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22pt-4\x20border-t\x20border-card-border\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-slate-400\x20mb-3\x22>Quick\x20Import\x20to\x20Client:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22grid\x20grid-cols-2\x20sm:grid-cols-4\x20gap-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22flex\x20flex-col\x20items-center\x20gap-2\x20p-3\x20rounded-xl\x20bg-slate-900\x20border\x20border-card-border\x20hover:border-blue-500\x20transition-all\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-orange-500\x20group-hover:scale-110\x20transition-transform\x22>bolt</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x22>Hiddify</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22flex\x20flex-col\x20items-center\x20gap-2\x20p-3\x20rounded-xl\x20bg-slate-900\x20border\x20border-card-border\x20hover:border-blue-500\x20transition-all\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-blue-500\x20group-hover:scale-110\x20transition-transform\x22>rocket_launch</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x22>V2rayNG</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22flex\x20flex-col\x20items-center\x20gap-2\x20p-3\x20rounded-xl\x20bg-slate-900\x20border\x20border-card-border\x20hover:border-blue-500\x20transition-all\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-purple-500\x20group-hover:scale-110\x20transition-transform\x22>pets</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x22>Clash\x20Meta</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22flex\x20flex-col\x20items-center\x20gap-2\x20p-3\x20rounded-xl\x20bg-slate-900\x20border\x20border-card-border\x20hover:border-blue-500\x20transition-all\x20group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-green-500\x20group-hover:scale-110\x20transition-transform\x22>shield</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x22>Exclave</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-2xl\x20p-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-lg\x20font-bold\x20mb-4\x20flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-blue-500\x22>badge</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Account\x20Details\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22space-y-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20class=\x22pb-3\x20border-b\x20border-white/5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x22>UUID</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20font-mono\x20text-white\x20mt-1\x20break-all\x22>'+escapeHtml(a['uuid'])+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20class=\x22pb-3\x20border-b\x20border-white/5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x22>Created\x20Date</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-white\x20mt-1\x22>'+new Date(a['created_at'])['toLocaleDateString']()+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-xs\x20text-slate-400\x22>Subscription\x20Plan</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-white\x20mt-1\x22>Standard\x20Monthly</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-card-dark\x20border\x20border-card-border\x20rounded-2xl\x20p-6\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-between\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22text-lg\x20font-bold\x20flex\x20items-center\x20gap-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-symbols-outlined\x20text-blue-500\x22>public</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Connection\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x20px-2\x20py-1\x20rounded\x20bg-green-500/10\x20border\x20border-green-500/20\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-1.5\x20h-1.5\x20rounded-full\x20bg-green-500\x20animate-pulse\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22text-[10px]\x20font-bold\x20text-green-500\x22>LIVE</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22space-y-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-slate-900\x20rounded-lg\x20p-3\x20border\x20border-white/5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-slate-400\x20mb-1\x22>IP\x20Protection</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-green-400\x20font-semibold\x22>‚úì\x20Enabled</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-slate-900\x20rounded-lg\x20p-3\x20border\x20border-white/5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-slate-400\x20mb-1\x22>Connection\x20Status</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x20text-green-400\x20font-semibold\x22>Ready</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20</main>\x0a\x0a\x20\x20<footer\x20class=\x22mt-12\x20py-6\x20text-center\x20text-slate-500\x20text-sm\x20border-t\x20border-card-border\x22>\x0a\x20\x20\x20\x20<p>¬©\x202024\x20Quantum\x20Shield\x20-\x20Secure\x20VLESS\x20Infrastructure\x20v'+CONFIG['VERSION']+'</p>\x0a\x20\x20</footer>\x0a\x0a\x20\x20<script>\x0a\x20\x20\x20\x20function\x20copyLink()\x20{\x0a\x20\x20\x20\x20\x20\x20const\x20input\x20=\x20document.getElementById(\x27vlessLink\x27);\x0a\x20\x20\x20\x20\x20\x20input.select();\x0a\x20\x20\x20\x20\x20\x20input.setSelectionRange(0,\x2099999);\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20navigator.clipboard.writeText(input.value).then(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20button\x20=\x20event.currentTarget;\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20originalHTML\x20=\x20button.innerHTML;\x0a\x20\x20\x20\x20\x20\x20\x20\x20button.innerHTML\x20=\x20\x27<span\x20class=\x22material-symbols-outlined\x20text-xl\x22>check</span><span\x20class=\x22hidden\x20sm:inline\x22>Copied!</span>\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20button.classList.add(\x27bg-green-500\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20button.classList.remove(\x27bg-blue-500\x27,\x20\x27hover:bg-blue-600\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20button.innerHTML\x20=\x20originalHTML;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20button.classList.remove(\x27bg-green-500\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20button.classList.add(\x27bg-blue-500\x27,\x20\x27hover:bg-blue-600\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20},\x202000);\x0a\x20\x20\x20\x20\x20\x20}).catch(err\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20alert(\x27Failed\x20to\x20copy:\x20\x27\x20+\x20err);\x0a\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20}\x0a\x20\x20</script>\x0a\x0a</body>\x0a</html>';}async function handleVLESSConnection(a,b,c,d){try{const e=new WebSocketPair(),f=e[0x0],g=e[0x1];g['accept']();let h=new Uint8Array(0x0),i=![],j=null,k=null,l=null;return g['addEventListener']('message',async m=>{try{let n;if(m['data']instanceof ArrayBuffer)n=new Uint8Array(m['data']);else{if(typeof m['data']==='string'){const o=new TextEncoder();n=o['encode'](m['data']);}else{console['error']('Unexpected\x20message\x20data\x20type');return;}}if(!i){h=concatenateUint8Arrays(h,n);if(h['length']<0x18)return;const p=h[0x0];if(p!==0x0){console['error']('Invalid\x20VLESS\x20protocol\x20version:',p),g['close']();return;}const q=h['slice'](0x1,0x11),r=convertBytesToUUID(q);l=await getUserData(r,b);if(!l||l['status']!=='active'){console['error']('Invalid\x20or\x20inactive\x20user:',r),g['close']();return;}let s=0x11;const t=h[s++],u=h[s++],v=h[s]<<0x8|h[s+0x1];s+=0x2;const w=h[s++];let x='';if(w===0x1)x=Array['from'](h['slice'](s,s+0x4))['join']('.'),s+=0x4;else{if(w===0x2){const y=h[s++],z=h['slice'](s,s+y);x=new TextDecoder()['decode'](z),s+=y;}else{if(w===0x3){const A=h['slice'](s,s+0x10),B=[];for(let C=0x0;C<0x10;C+=0x2){const D=(A[C]<<0x8|A[C+0x1])['toString'](0x10);B['push'](D);}x=B['join'](':'),s+=0x10;}else{console['error']('Unknown\x20address\x20type:',w),g['close']();return;}}}console['log']('Establishing\x20connection\x20to\x20'+x+':'+v);try{j=connect({'hostname':x,'port':v},{'secureTransport':'on','allowHalfOpen':!![]}),k=j['writable']['getWriter']();const E=new Uint8Array([p,0x0]);g['send'](E['buffer']);if(h['length']>s){const F=h['slice'](s);await k['write'](F);}i=!![],pipeRemoteToClient(j,g);}catch(G){console['error']('Remote\x20connection\x20failed:',G),g['close']();return;}}else{if(k&&j)try{await k['write'](n);}catch(H){console['error']('Write\x20to\x20remote\x20failed:',H),g['close']();if(j)try{j['close']();}catch(I){}}}}catch(J){console['error']('Message\x20handler\x20error:',J),g['close']();if(j)try{j['close']();}catch(K){}}}),g['addEventListener']('close',()=>{if(j)try{j['close']();}catch(m){}}),g['addEventListener']('error',m=>{console['error']('WebSocket\x20error:',m);if(j)try{j['close']();}catch(n){}}),new Response(null,{'status':0x65,'webSocket':f});}catch(m){return console['error']('VLESS\x20handler\x20error:',m),createJsonResponse({'error':'Connection\x20failed','message':'Unable\x20to\x20establish\x20VLESS\x20connection'},0x1f4);}}async function pipeRemoteToClient(a,b){try{const c=a['readable']['getReader']();while(!![]){const {done:d,value:f}=await c['read']();if(d)break;if(b['readyState']===WebSocket['OPEN'])b['send'](f['buffer']);else break;}}catch(g){console['error']('Pipe\x20error:',g);}finally{try{b['close']();}catch(h){}try{a['close']();}catch(i){}}}async function handleAPIRequest(a,b,c){try{const d=new URL(a['url']),e=d['pathname']['replace'](CONFIG['PATHS']['API'],''),f=a['headers']['get']('Authorization');if(!f||!f['startsWith']('Bearer\x20'))return createJsonResponse({'error':'Unauthorized'},0x191);const g=f['substring'](0x7),h=verifySessionToken(g);if(!h)return createJsonResponse({'error':'Invalid\x20or\x20expired\x20token'},0x191);if(e==='/users'&&a['method']==='GET')return await listAllUsers(b);if(e==='/users'&&a['method']==='POST')return await createNewUser(a,b);if(e==='/stats'&&a['method']==='GET')return await getSystemStats(b);return createJsonResponse({'error':'Endpoint\x20not\x20found'},0x194);}catch(i){return console['error']('API\x20error:',i),createJsonResponse({'error':'API\x20request\x20failed'},0x1f4);}}async function listAllUsers(a){try{if(!a['QUANTUM_DB'])return createJsonResponse({'users':[],'total':0x0,'message':'Database\x20not\x20configured'});const b=await a['QUANTUM_DB']['prepare']('SELECT\x20id,\x20uuid,\x20username,\x20traffic_limit_gb,\x20traffic_used_gb,\x20expiry_date,\x20status,\x20created_at\x20FROM\x20users\x20ORDER\x20BY\x20created_at\x20DESC')['all']();return createJsonResponse({'success':!![],'users':b['results']||[],'total':b['results']?b['results']['length']:0x0});}catch(c){return console['error']('List\x20users\x20error:',c),createJsonResponse({'error':'Failed\x20to\x20retrieve\x20users'},0x1f4);}}async function createNewUser(a,b){try{if(!b['QUANTUM_DB'])return createJsonResponse({'error':'Database\x20not\x20configured'},0x1f7);const c=await a['json']();if(!c['username']||typeof c['username']!=='string')return createJsonResponse({'error':'Valid\x20username\x20is\x20required'},0x190);const d=generateUUID(),e=c['expiry_date']||new Date(Date['now']()+0x1e*0x5265c00)['toISOString'](),f=c['traffic_limit_gb']||0x32;await b['QUANTUM_DB']['prepare']('INSERT\x20INTO\x20users\x20(uuid,\x20username,\x20traffic_limit_gb,\x20expiry_date,\x20status)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)')['bind'](d,c['username']['trim'](),f,e,'active')['run']();const g='/panel/'+d;return createJsonResponse({'success':!![],'user':{'uuid':d,'username':c['username']['trim'](),'traffic_limit_gb':f,'expiry_date':e,'panel_url':g,'status':'active'},'message':'User\x20created\x20successfully'},0xc9);}catch(h){return console['error']('Create\x20user\x20error:',h),createJsonResponse({'error':'Failed\x20to\x20create\x20user'},0x1f4);}}async function getSystemStats(a){try{if(!a['QUANTUM_DB'])return createJsonResponse({'system':{'version':CONFIG['VERSION'],'timestamp':new Date()['toISOString']()},'message':'Database\x20not\x20configured'});const b=await a['QUANTUM_DB']['prepare']('SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20users')['first'](),c=await a['QUANTUM_DB']['prepare']('SELECT\x20COUNT(*)\x20as\x20count\x20FROM\x20users\x20WHERE\x20status\x20=\x20?')['bind']('active')['first'](),d=await a['QUANTUM_DB']['prepare']('SELECT\x20SUM(traffic_used_gb)\x20as\x20total\x20FROM\x20users')['first']();return createJsonResponse({'success':!![],'system':{'version':CONFIG['VERSION'],'timestamp':new Date()['toISOString']()},'users':{'total':b?.['count']||0x0,'active':c?.['count']||0x0,'inactive':(b?.['count']||0x0)-(c?.['count']||0x0)},'traffic':{'total_gb':Math['round']((d?.['total']||0x0)*0x64)/0x64,'average_per_user':b?.['count']>0x0?Math['round']((d?.['total']||0x0)/b['count']*0x64)/0x64:0x0}});}catch(e){return console['error']('Stats\x20error:',e),createJsonResponse({'error':'Failed\x20to\x20retrieve\x20statistics'},0x1f4);}}async function handleAdminLogin(a,b,c){try{const d=await a['json']();if(!d['username']||!d['password'])return createJsonResponse({'error':'Username\x20and\x20password\x20are\x20required'},0x190);const e=b['ADMIN_USERNAME']||'admin',f=b['ADMIN_PASSWORD']||'quantum2025';if(d['username']!==e||d['password']!==f)return console['warn']('Failed\x20login\x20attempt\x20from\x20'+c),createJsonResponse({'error':'Invalid\x20credentials'},0x191);const g=generateSecureToken(0x20),h=new Date(Date['now']()+CONFIG['SECURITY']['SESSION_TIMEOUT']);return cacheMap['set']('session_'+g,{'value':{'username':e,'ip':c,'created':Date['now']()},'timestamp':Date['now']()}),createJsonResponse({'success':!![],'token':g,'expiresAt':h['toISOString'](),'message':'Login\x20successful'});}catch(i){return console['error']('Login\x20error:',i),createJsonResponse({'error':'Login\x20failed'},0x1f4);}}function handleAdminPanel(a){const b='<!DOCTYPE\x20html>\x0a<html\x20class=\x22dark\x22>\x0a<head>\x0a\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20<title>Quantum\x20Admin\x20Panel</title>\x0a\x20\x20<link\x20href=\x22https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\x22\x20rel=\x22stylesheet\x22>\x0a\x20\x20<script\x20src=\x22https://cdn.tailwindcss.com\x22></script>\x0a\x20\x20<script>\x0a\x20\x20\x20\x20tailwind.config\x20=\x20{\x20darkMode:\x20\x22class\x22\x20}\x0a\x20\x20</script>\x0a\x20\x20<style>\x0a\x20\x20\x20\x20body\x20{\x20\x0a\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(135deg,\x20#667eea\x200%,\x20#764ba2\x20100%);\x0a\x20\x20\x20\x20}\x0a\x20\x20</style>\x0a</head>\x0a<body\x20class=\x22min-h-screen\x20flex\x20items-center\x20justify-center\x20p-4\x22>\x0a\x20\x20<div\x20class=\x22max-w-md\x20w-full\x20bg-slate-800\x20rounded-2xl\x20p-8\x20shadow-2xl\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-8\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-16\x20h-16\x20bg-gradient-to-br\x20from-blue-500\x20to-purple-600\x20rounded-2xl\x20flex\x20items-center\x20justify-center\x20mx-auto\x20mb-4\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x202rem;\x22>üöÄ</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<h1\x20class=\x22text-3xl\x20font-bold\x20text-white\x20mb-2\x22>Quantum\x20Shield</h1>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-slate-400\x22>Admin\x20Panel\x20v'+CONFIG['VERSION']+'</p>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<form\x20id=\x22loginForm\x22\x20class=\x22space-y-4\x22>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-slate-300\x20mb-2\x22>Username</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type=\x22text\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id=\x22username\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20required\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20autocomplete=\x22username\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20bg-slate-900\x20border\x20border-slate-700\x20rounded-lg\x20px-4\x20py-3\x20text-white\x20focus:ring-2\x20focus:ring-blue-500\x20focus:border-transparent\x20outline-none\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20placeholder=\x22Enter\x20your\x20username\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22block\x20text-sm\x20font-medium\x20text-slate-300\x20mb-2\x22>Password</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20type=\x22password\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id=\x22password\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20required\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20autocomplete=\x22current-password\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20bg-slate-900\x20border\x20border-slate-700\x20rounded-lg\x20px-4\x20py-3\x20text-white\x20focus:ring-2\x20focus:ring-blue-500\x20focus:border-transparent\x20outline-none\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20placeholder=\x22Enter\x20your\x20password\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<button\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20type=\x22submit\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20id=\x22submitBtn\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20bg-blue-500\x20hover:bg-blue-600\x20text-white\x20font-semibold\x20py-3\x20rounded-lg\x20transition-colors\x22\x0a\x20\x20\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20\x20\x20Login\x20to\x20Dashboard\x0a\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20id=\x22message\x22\x20class=\x22mt-4\x20p-4\x20rounded-lg\x20hidden\x22></div>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20<div\x20class=\x22mt-8\x20pt-8\x20border-t\x20border-slate-700\x20space-y-2\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x20text-xs\x20text-slate-400\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>‚úÖ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>Quantum\x20Encryption\x20&\x20Anti-Filter</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x20text-xs\x20text-slate-400\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>‚úÖ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>Individual\x20User\x20Panels\x20with\x20UUID</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20gap-2\x20text-xs\x20text-slate-400\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>‚úÖ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>Smart\x20Traffic\x20Management</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a\x20\x20\x0a\x20\x20<script>\x0a\x20\x20\x20\x20const\x20form\x20=\x20document.getElementById(\x27loginForm\x27);\x0a\x20\x20\x20\x20const\x20submitBtn\x20=\x20document.getElementById(\x27submitBtn\x27);\x0a\x20\x20\x20\x20const\x20messageDiv\x20=\x20document.getElementById(\x27message\x27);\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20form.addEventListener(\x27submit\x27,\x20async\x20(e)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20e.preventDefault();\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20const\x20username\x20=\x20document.getElementById(\x27username\x27).value;\x0a\x20\x20\x20\x20\x20\x20const\x20password\x20=\x20document.getElementById(\x27password\x27).value;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20submitBtn.disabled\x20=\x20true;\x0a\x20\x20\x20\x20\x20\x20submitBtn.textContent\x20=\x20\x27Authenticating...\x27;\x0a\x20\x20\x20\x20\x20\x20messageDiv.classList.add(\x27hidden\x27);\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20response\x20=\x20await\x20fetch(\x27/admin-login\x27,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20method:\x20\x27POST\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20headers:\x20{\x20\x27Content-Type\x27:\x20\x27application/json\x27\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body:\x20JSON.stringify({\x20username,\x20password\x20})\x0a\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20const\x20result\x20=\x20await\x20response.json();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(result.success)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20messageDiv.className\x20=\x20\x27mt-4\x20p-4\x20rounded-lg\x20bg-green-500/20\x20text-green-400\x20border\x20border-green-500/30\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20messageDiv.textContent\x20=\x20\x27‚úÖ\x20Login\x20successful!\x20Redirecting...\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20messageDiv.classList.remove(\x27hidden\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20localStorage.setItem(\x27authToken\x27,\x20result.token);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20localStorage.setItem(\x27tokenExpiry\x27,\x20result.expiresAt);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20window.location.href\x20=\x20\x27/api/v3/stats\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20},\x201500);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20throw\x20new\x20Error(result.error\x20||\x20\x27Login\x20failed\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20messageDiv.className\x20=\x20\x27mt-4\x20p-4\x20rounded-lg\x20bg-red-500/20\x20text-red-400\x20border\x20border-red-500/30\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20messageDiv.textContent\x20=\x20\x27‚ùå\x20\x27\x20+\x20error.message;\x0a\x20\x20\x20\x20\x20\x20\x20\x20messageDiv.classList.remove(\x27hidden\x27);\x0a\x20\x20\x20\x20\x20\x20}\x20finally\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20submitBtn.disabled\x20=\x20false;\x0a\x20\x20\x20\x20\x20\x20\x20\x20submitBtn.textContent\x20=\x20\x27Login\x20to\x20Dashboard\x27;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20});\x0a\x20\x20</script>\x0a</body>\x0a</html>';return new Response(b,{'status':0xc8,'headers':{'Content-Type':'text/html;\x20charset=utf-8',...getSecurityHeaders()}});}async function handleReverseProxy(a,b){try{const c=b['ROOT_PROXY_URL']||'https://www.wikipedia.org',d=new Request(c,{'method':a['method'],'headers':{'User-Agent':a['headers']['get']('User-Agent')||'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36','Accept':a['headers']['get']('Accept')||'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','Accept-Language':a['headers']['get']('Accept-Language')||'en-US,en;q=0.9'}}),e=await fetch(d),f=new Headers(e['headers']);return f['set']('X-Proxied-By','Cloudflare-Workers'),f['delete']('Content-Security-Policy'),f['delete']('X-Frame-Options'),new Response(e['body'],{'status':e['status'],'statusText':e['statusText'],'headers':f});}catch(g){return console['error']('Proxy\x20error:',g),handleFakePage();}}function handleFakePage(){const a='<!DOCTYPE\x20html>\x0a<html\x20lang=\x22en\x22>\x0a<head>\x0a\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20<meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,\x20initial-scale=1.0\x22>\x0a\x20\x20<meta\x20name=\x22description\x22\x20content=\x22Web\x20service\x20powered\x20by\x20Cloudflare\x22>\x0a\x20\x20<title>Welcome\x20-\x20Web\x20Service</title>\x0a\x20\x20<style>\x0a\x20\x20\x20\x20*\x20{\x20margin:\x200;\x20padding:\x200;\x20box-sizing:\x20border-box;\x20}\x0a\x20\x20\x20\x20body\x20{\x0a\x20\x20\x20\x20\x20\x20font-family:\x20-apple-system,\x20BlinkMacSystemFont,\x20\x27Segoe\x20UI\x27,\x20Roboto,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(135deg,\x20#f5f7fa\x200%,\x20#c3cfe2\x20100%);\x0a\x20\x20\x20\x20\x20\x20min-height:\x20100vh;\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.container\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20white;\x0a\x20\x20\x20\x20\x20\x20padding:\x2060px\x2040px;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x2020px;\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x2020px\x2060px\x20rgba(0,0,0,0.15);\x0a\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20max-width:\x20600px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20h1\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x202.5rem;\x0a\x20\x20\x20\x20\x20\x20color:\x20#2c3e50;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20p\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x201.1rem;\x0a\x20\x20\x20\x20\x20\x20color:\x20#7f8c8d;\x0a\x20\x20\x20\x20\x20\x20line-height:\x201.8;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.footer\x20{\x0a\x20\x20\x20\x20\x20\x20margin-top:\x2030px;\x0a\x20\x20\x20\x20\x20\x20padding-top:\x2020px;\x0a\x20\x20\x20\x20\x20\x20border-top:\x202px\x20solid\x20#ecf0f1;\x0a\x20\x20\x20\x20\x20\x20color:\x20#95a5a6;\x0a\x20\x20\x20\x20\x20\x20font-size:\x200.9rem;\x0a\x20\x20\x20\x20}\x0a\x20\x20</style>\x0a</head>\x0a<body>\x0a\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20<h1>üëã\x20Welcome</h1>\x0a\x20\x20\x20\x20<p>This\x20is\x20a\x20standard\x20web\x20service\x20running\x20on\x20Cloudflare\x20Workers.</p>\x0a\x20\x20\x20\x20<p>Everything\x20is\x20operating\x20normally\x20and\x20all\x20systems\x20are\x20functional.</p>\x0a\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20Powered\x20by\x20Cloudflare\x20Workers\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a</body>\x0a</html>';return new Response(a,{'status':0xc8,'headers':{'Content-Type':'text/html;\x20charset=utf-8',...getSecurityHeaders()}});}function handleHealthCheck(){return createJsonResponse({'status':'healthy','version':CONFIG['VERSION'],'timestamp':new Date()['toISOString'](),'uptime':Date['now'](),'features':{'vless':!![],'userPanels':!![],'antiFilter':!![],'reverseProxy':!![]}});}async function getUserData(a,b){try{const c='user_'+a,d=cacheMap['get'](c);if(d&&Date['now']()-d['timestamp']<0xea60)return d['value'];if(b['QUANTUM_DB']){const e=await b['QUANTUM_DB']['prepare']('SELECT\x20*\x20FROM\x20users\x20WHERE\x20uuid\x20=\x20?\x20LIMIT\x201')['bind'](a)['first']();if(e)return cacheMap['set'](c,{'value':e,'timestamp':Date['now']()}),e;}return{'id':0x1,'uuid':a,'username':'Demo\x20User','status':'active','traffic_limit_gb':0x32,'traffic_used_gb':12.5,'expiry_date':new Date(Date['now']()+0x1e*0x5265c00)['toISOString'](),'created_at':new Date()['toISOString']()};}catch(f){return console['error']('Get\x20user\x20error:',f),null;}}function checkRateLimit(a){const b=Date['now'](),c=0xea60,d=rateMap['get'](a);if(!d)return rateMap['set'](a,{'count':0x1,'resetTime':b+c}),!![];if(b>d['resetTime'])return d['count']=0x1,d['resetTime']=b+c,!![];return d['count']++,d['count']<=CONFIG['SECURITY']['RATE_LIMIT'];}function verifySessionToken(a){const b='session_'+a,c=cacheMap['get'](b);if(!c)return![];const d=Date['now']()-c['timestamp'];return d<CONFIG['SECURITY']['SESSION_TIMEOUT'];}function generateVLESSLink(a,b){const c=new URLSearchParams({'encryption':'none','security':'tls','sni':b,'type':'ws','host':b,'path':CONFIG['PATHS']['VLESS']});return'vless://'+a+'@'+b+':443?'+c['toString']()+'#Quantum-Shield-User';}function isValidUUID(a){const b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b['test'](a);}function generateUUID(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'['replace'](/[xy]/g,function(a){const b=Math['random']()*0x10|0x0,c=a==='x'?b:b&0x3|0x8;return c['toString'](0x10);});}function generateSecureToken(a){const b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let c='';for(let d=0x0;d<a;d++){const e=Math['floor'](Math['random']()*b['length']);c+=b['charAt'](e);}return c;}function convertBytesToUUID(a){const b=Array['from'](a,c=>c['toString'](0x10)['padStart'](0x2,'0'))['join']('');return[b['slice'](0x0,0x8),b['slice'](0x8,0xc),b['slice'](0xc,0x10),b['slice'](0x10,0x14),b['slice'](0x14,0x20)]['join']('-');}function concatenateUint8Arrays(...a){const b=a['reduce']((e,f)=>e+f['length'],0x0),c=new Uint8Array(b);let d=0x0;for(const e of a){c['set'](e,d),d+=e['length'];}return c;}function escapeHtml(a){const b={'&':'&amp;','<':'&lt;','>':'&gt;','\x22':'&quot;','\x27':'&#39;'};return a['replace'](/[&<>"']/g,c=>b[c]);}function getSecurityHeaders(){return{'X-Content-Type-Options':'nosniff','X-Frame-Options':'DENY','X-XSS-Protection':'1;\x20mode=block','Referrer-Policy':'no-referrer','Permissions-Policy':'geolocation=(),\x20microphone=(),\x20camera=()'};}function getCorsHeaders(){return{'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET,\x20POST,\x20PUT,\x20DELETE,\x20OPTIONS','Access-Control-Allow-Headers':'Content-Type,\x20Authorization','Access-Control-Max-Age':'86400',...getSecurityHeaders()};}function createJsonResponse(a,b=0xc8){return new Response(JSON['stringify'](a,null,0x2),{'status':b,'headers':{'Content-Type':'application/json;\x20charset=utf-8',...getCorsHeaders()}});}